<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link rel="shortcut icon" type="image/ico" href="/src/assets/icon.png" />
    <title>Oleg Luganskiy</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://unpkg.com" />
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="https://tile.openstreetmap.org" />
    
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <link rel="stylesheet" href="/src/index.css" />
    <link rel="preload" as="style" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" onload="this.onload=null;this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" /></noscript>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css"
    />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet" />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <script>
      // Check localStorage first
      const storedTheme = localStorage.getItem('theme');
      const root = document.documentElement;

      // Function to apply dark theme
      function applyDarkTheme() {
        document.body.classList.add('dark');
        root.style.setProperty('--bg', '#1b1d1e');
        root.style.setProperty('--color', '#dddddd');
      }

      // Function to apply light theme
      function applyLightTheme() {
        document.body.classList.remove('dark');
        root.style.setProperty('--bg', '#f9f5ef');
        root.style.setProperty('--color', '#1b1d1e');
      }

      if (storedTheme === 'dark') {
        applyDarkTheme();
      } else if (storedTheme === 'light') {
        applyLightTheme();
      } else {
        // Check system preference if no stored theme
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          applyDarkTheme();
        } else {
          // Check time of day as fallback
          const hour = new Date().getHours();
          if (hour <= 6 || hour >= 20) {
            applyDarkTheme();
          } else {
            applyLightTheme();
          }
        }
      }
    </script>

    <div id="root"></div>

    <script src="/src/index.tsx" type="module"></script>
  </body>
</html>
